<!DOCTYPE html>
<html>
  <head>
    <title>Playtopia|</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.png" />
    <link rel="stylesheet" href="../css/index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="../js/index.js"></script>
    <script src="../js/creditCardUpdate.js"></script>
    <link rel="stylesheet" href="../css/creditCardUpdate.css" />
  </head>

  <body>
    <header class="header" role="banner">
      <div class="container">
        <nav class="navUser">
          <ul class="navUser-section">
            <li class="item__account" id="item__account">
              <a aria-label="Account" href="http://127.0.0.1:8080/login"
                ><img
                  src="../images/white-icons/account-icon.png"
                  alt="account"
                  width="30"
                />
              </a>
            </li>
            <li class="item__wishlist">
              <a aria-label="Wishlist" href="">
                <img
                  src="../images/white-icons/wishlist-icon.png"
                  alt="Cart"
                  width="30"
                />
              </a>
            </li>
            <li class="item__cart">
              <a href="http://127.0.0.1:8080/cart" aria-label="Cart">
                <img
                  src="../images/white-icons/cart-icon.png"
                  alt="Cart"
                  width="30"
                />
              </a>
            </li>
          </ul>
        </nav>

        <div class="header-logo">
          <a href="http://127.0.0.1:8080/" data-instantload='{"page":"home"}'>
            <div class="header-logo-image-container">
              <img
                class="header-logo-image"
                src="../images/logo.png"
                width="180"
                height="auto"
              />
            </div>
          </a>
        </div>

        <div class="quickSearch">
          <form class="form">
            <div class="form-container">
              <input
                class="form-input"
                data-search-quick
                name="search_query"
                id="search_query"
                data-error-message="Search field cannot be empty."
                placeholder="Search the store"
                autocomplete="off"
              />
              <button
                type="submit"
                class="button search-button"
                id="searchButton"
              >
                <img
                  src="../images/white-icons/search-icon.png"
                  alt="Search"
                  width="25"
                  height="auto"
                />
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Start Navigation Bar -->
      <nav class="navbar">
        <ul class="menu">
          <li>
            <a
              class="hasDropdown header-title"
              href="http://127.0.0.1:8080/products"
              >Categories <i class="fa fa-angle-down"></i
            ></a>

            <ul class="nav_container">
              <div class="container__list">
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=boardgames"
                      class="sub-label-menu"
                      >Board Games</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=science"
                      class="sub-label-menu"
                      >Science</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=games"
                      class="sub-label-menu"
                      >Games</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=ridingtoys"
                      class="sub-label-menu"
                      >Riding Toys</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=puzzles"
                      class="sub-label-menu"
                      >Puzzles</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=musickaroke"
                      class="sub-label-menu"
                      >Music & Karaoke</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=books"
                      class="sub-label-menu"
                      >Books</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=lego"
                      class="sub-label-menu"
                      >Lego</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=dolls"
                      class="sub-label-menu"
                      >Dolls</a
                    >
                  </div>
                </div>
                <div class="container__listItem"></div>
                <div class="container__listItem"></div>

                <div class="container__listItem">
                  <div class="container__listItem_title bold no-underline">
                    <a
                      href="http://127.0.0.1:8080/products?category=10andbellow"
                      class="sub-label-menu"
                      >$10 & Below</a
                    >
                  </div>
                </div>
              </div>
            </ul>
          </li>
          <li>
            <a
              class="hasDropdown header-title"
              href="http://127.0.0.1:8080/products"
              >Ages<i class="fa fa-angle-down"></i
            ></a>
            <ul class="nav_container">
              <div class="container__list">
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=0-12"
                      class="sub-label-menu"
                      >0-12 MONTHS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=12-24"
                      class="sub-label-menu"
                      >12-24 MONTHS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=2-4"
                      class="sub-label-menu"
                      >2-4 YEARS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=5-7"
                      class="sub-label-menu"
                      >5-7 YEARS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=8-99"
                      class="sub-label-menu"
                      >8-99 YEARS</a
                    >
                  </div>
                </div>
              </div>
            </ul>
          </li>
          <li>
            <a
              href="http://127.0.0.1:8080/products?category=outdoor"
              class="header-title"
              >Outdoor</a
            >
          </li>
          <li>
            <a
              href="http://127.0.0.1:8080/products?category=yad2"
              class="header-title"
              >Yad2</a
            >
          </li>
          <li>
            <a href="http://127.0.0.1:8080/Gift-Finder" class="header-title"
              >Gift Finder</a
            >
          </li>
        </ul>
      </nav>
      <!-- End Navigation Bar -->
    </header>

    <main style="margin-top: 170px">
      <p class="center">
        Update your Credit Catd details and save it for your next purchases:
      </p>
      <div class="checkout">
        <form
          method="POST"
          action="/creditcard"
          class="form"
          id="creditCardUpdate-form"
        >
          <fieldset>
            <label class="pay-label" for="card-number">Card Number</label>
            <input
              type="num"
              id="card-number"
              class="input-cart-number"
              maxlength="4"
              required
            />
            <input
              type="num"
              id="card-number-1"
              class="input-cart-number"
              maxlength="4"
            />
            <input
              type="num"
              id="card-number-2"
              class="input-cart-number"
              max="9999"
              maxlength="4"
              required
            />
            <input
              type="num"
              id="card-number-3"
              class="input-cart-number"
              max="9999"
              maxlength="4"
              required
            />
          </fieldset>
          <div id="card-number-error" class="error-message"></div>
          <fieldset>
            <label class="pay-label" for="card-holder">Card holder</label>
            <input type="text" id="card-holder" required />
            <div id="card-holder-error" class="error-message"></div>
          </fieldset>
          <fieldset class="fieldset-expiration">
            <label class="pay-label" for="card-expiration-month"
              >Expiration date</label
            >
            <div class="select">
              <select id="card-expiration-month" required>
                <option></option>
                <option>01</option>
                <option>02</option>
                <option>03</option>
                <option>04</option>
                <option>05</option>
                <option>06</option>
                <option>07</option>
                <option>08</option>
                <option>09</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
              </select>
            </div>
            <div id="expiration-month-error" class="error-message"></div>
            <div class="select">
              <select id="card-expiration-year" required>
                <option></option>
                <option>2023</option>
                <option>2024</option>
                <option>2025</option>
                <option>2026</option>
                <option>2027</option>
                <option>2028</option>
                <option>2029</option>
                <option>2030</option>
              </select>
            </div>
            <div id="expiration-year-error" class="error-message"></div>
          </fieldset>
          <fieldset class="fieldset-ccv">
            <label class="pay-label" for="card-ccv">CCV</label>
            <input type="num" id="card-ccv" maxlength="3" required />
            <div id="cvv-number-error" class="error-message"></div>
          </fieldset>

          <fieldset class="fieldset-footer">
            <div class="form-footer">
              <button class="btn-ns-hot" type="submit" id="update-button">
                Update
              </button>
            </div>
          </fieldset>
        </form>
      </div>

      <script>
  document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("creditCardUpdate-form");

  form.addEventListener("submit", function (event) {
    event.preventDefault();

    const cardNumber = document.getElementById("card-number").value +
      document.getElementById("card-number-1").value +
      document.getElementById("card-number-2").value +
      document.getElementById("card-number-3").value;
    const cardHolder = document.getElementById("card-holder").value;
    const expirationMonth = document.getElementById("card-expiration-month").value;
    const expirationYear = document.getElementById("card-expiration-year").value;
    const ccv = document.getElementById("card-ccv").value;

    const data = {
      card_number: cardNumber,
      holder_name: cardHolder,
      expiration_date: expirationMonth,
      ccv: ccv,
    };

    $.ajax({
      url: "http://127.0.0.1:8080/creditcard",
      type: "POST",
      contentType: "application/json",
      data: JSON.stringify(data),
      success: function (result) {
        // Handle the response from the server if needed
        console.log("Response from server:", result);
        // You can display a success message or perform other actions here
      },
      error: function (error) {
        console.error("Error sending data:", error);
        // Handle errors here
      },
    });
  });
});

      </script>
    </main>

    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-content"></div>
      </div>
    </div>
  </body>
</html>
