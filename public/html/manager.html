<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Games For All|About Us</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.png" />
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/manager.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <script src="../js/index.js"></script>
    <script src="../js/manager.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body>
    <header class="header" role="banner">
      <div class="container">
        <nav class="navUser">
          <ul class="navUser-section">
            <li class="item__account" id="item__account">
              <a aria-label="Account" href=""
                ><img
                  src="../images/white-icons/account-icon.png"
                  alt="account"
                  width="30"
                />
              </a>
            </li>
            <li class="item__wishlist">
              <a aria-label="Wishlist" href="">
                <img
                  src="../images/white-icons/wishlist-icon.png"
                  alt="Cart"
                  width="30"
                />
              </a>
            </li>
            <li class="item__cart">
              <a href="../html/cart.html" aria-label="Cart">
                <img
                  src="../images/white-icons/cart-icon.png"
                  alt="Cart"
                  width="30"
                />
              </a>
            </li>
          </ul>
        </nav>

        <div class="header-logo">
          <a href="#" data-instantload='{"page":"home"}'>
            <div class="header-logo-image-container">
              <img
                class="header-logo-image"
                src="../images/logo.png"
                width="180"
                height="auto"
              />
            </div>
          </a>
        </div>

        <div class="quickSearch">
          <form class="form">
            <div class="form-container">
              <input
                class="form-input"
                data-search-quick
                name="search_query"
                id="search_query"
                data-error-message="Search field cannot be empty."
                placeholder="Search the store"
                autocomplete="off"
              />
              <button
                type="submit"
                class="button search-button"
                id="searchButton"
              >
                <img
                  src="../images/white-icons/search-icon.png"
                  alt="Search"
                  width="25"
                  height="auto"
                />
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Start Navigation Bar -->
      <nav class="navbar">
        <ul class="menu">
          <li>
            <a class="hasDropdown" href="#"
              >Categories <i class="fa fa-angle-down"></i
            ></a>

            <ul class="nav_container">
              <div class="container__list">
                <div class="container__listItem">
                  <div class="container__listItem_title">Board Games</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Science</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Games</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Riding Toys</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Puzzles</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Music&Karaoke</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Books</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Lego</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">Dolls</div>
                </div>
                <div class="container__listItem"></div>
                <div class="container__listItem"></div>

                <div class="container__listItem">
                  <div class="container__listItem_title bold no-underline">
                    $10 & Below
                  </div>
                </div>
              </div>
            </ul>
          </li>
          <li>
            <a class="hasDropdown" href="#"
              >Ages<i class="fa fa-angle-down"></i
            ></a>
            <ul class="nav_container">
              <div class="container__list">
                <div class="container__listItem">
                  <div class="container__listItem_title">0-12 MONTHS</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">12-24 MONTHS</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">2-4 YEARS</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">5-7 YEARS</div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">8-99 YEARS</div>
                </div>
              </div>
            </ul>
          </li>
          <li>
            <a href="#">Outdoor</a>
          </li>
          <li>
            <a href="#">Yad2</a>
          </li>
          <li>
            <a href="GiftFinder.html">Gift Finder</a>
          </li>
        </ul>
      </nav>
      <!-- End Navigation Bar -->
    </header>
    <main style="margin-top: 150px">
        <h1>Manager Dashboard</h1>

        <section id="content-management">
            <h2>Content Management:</h2>
            <p>In order to learn abou the statistice of different age ranges in the countey according to areas - go to:  <a href="statistics.html">Statistics Page</a></p>
            <!-- Need to add websocket managment -->

        </section>

        <!-- <h2>Users Management:</h2>       
        <table id="data-table">
          <thead>
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>City</th>
              <th>Street</th>
              <th>Country</th>
              <th>Postal Code</th>
              <th>Username</th>
              <th>Email</th>
              <th>Phone Number</th>
              <th>Credit Card</th>
              <th>ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      
        <script>
          $(document).ready(function () {
            const url = 'http://127.0.0.1:8080/api/users'; // Replace with the actual URL
            const tableBody = $('#data-table tbody');
      
            $.ajax({
              url: url,
              method: 'GET',
              dataType: 'json',
              success: function (data) {
                const users = data; // Assuming the array is directly in the response
      
                users.forEach(function (user) {
                  const row = createTableRow(user);
                  tableBody.append(row);
                });
              },
              error: function (error) {
                console.error('Error:', error);
              }
            });
      
            function createTableRow(data) {
              const row = $('<tr>');
              row.append($('<td>').text(data.name.firstName));
              row.append($('<td>').text(data.name.lastName));
              row.append($('<td>').text(data.address.city));
              row.append($('<td>').text(data.address.street));
              row.append($('<td>').text(data.address.country));
              row.append($('<td>').text(data.address.postalCode));
              row.append($('<td>').text(data.username));
              row.append($('<td>').text(data.email || '-'));
              row.append($('<td>').text(data.phoneNumber || '-'));
              row.append($('<td>').text(data.creditCard || '-'));
              row.append($('<td>').text(data._id));
              return row;
            }
          });
        </script> -->

        <h2>Users Management:</h2>
        <form id="add-user-form">
          <label for="firstName">First Name:</label>
          <input type="text" id="firstName" name="firstName" required><br>
          <label for="lastName">Last Name:</label>
          <input type="text" id="lastName" name="lastName" required><br>
          <label for="city">City:</label>
          <input type="text" id="city" name="city" required><br>
          <label for="street">Street:</label>
          <input type="text" id="street" name="street" required><br>
          <label for="country">Country:</label>
          <input type="text" id="country" name="country" required><br>
          <label for="postalCode">Postal Code:</label>
          <input type="text" id="postalCode" name="postalCode" required><br>
          <label for="username">Username:</label>
          <input type="text" id="username" name="username" required><br>
          <label for="email">Email:</label>
          <input type="email" id="email" name="email"><br>
          <label for="phoneNumber">Phone Number:</label>
          <input type="tel" id="phoneNumber" name="phoneNumber"><br>
          <label for="creditCard">Credit Card:</label>
          <input type="text" id="creditCard" name="creditCard"><br>
          <button type="submit">Add User</button>
        </form>
        
        <table id="data-table">
          <thead>
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>City</th>
              <th>Street</th>
              <th>Country</th>
              <th>Postal Code</th>
              <th>Username</th>
              <th>Email</th>
              <th>Phone Number</th>
              <th>Credit Card</th>
              <th>ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        
        <script>
          $(document).ready(function () {
            const url = 'http://127.0.0.1:8080/api/users';
            const tableBody = $('#data-table tbody');
            const addUserForm = $('#add-user-form');
      
            function fetchUsers() {
              $.ajax({
                url: url,
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                  tableBody.empty();
                  data.forEach(function (user) {
                    const row = createTableRow(user);
                    tableBody.append(row);
                  });
                },
                error: function (error) {
                  console.error('Error:', error);
                }
              });
            }
      
            addUserForm.on('submit', function (event) {
              event.preventDefault();
      
              const newUser = {
                firstName: $('#firstName').val(),
                lastName: $('#lastName').val(),
                address: {
                  city: $('#city').val(),
                  street: $('#street').val(),
                  country: $('#country').val(),
                  postalCode: $('#postalCode').val()
                },
                username: $('#username').val(),
                email: $('#email').val(),
                phoneNumber: $('#phoneNumber').val(),
                creditCard: $('#creditCard').val()
              };
      
              $.ajax({
                url: '/crud/user',
                method: 'POST',
                data: JSON.stringify(newUser),
                contentType: 'application/json',
                success: function () {
                  fetchUsers();
                  addUserForm[0].reset();
                },
                error: function (error) {
                  console.error('Error:', error);
                }
              });
            });
      
            function createTableRow(data) {
              const row = $('<tr>');
              row.append($('<td>').text(data.firstName));
              row.append($('<td>').text(data.lastName));
              row.append($('<td>').text(data.address.city));
              row.append($('<td>').text(data.address.street));
              row.append($('<td>').text(data.address.country));
              row.append($('<td>').text(data.address.postalCode));
              row.append($('<td>').text(data.username));
              row.append($('<td>').text(data.email || '-'));
              row.append($('<td>').text(data.phoneNumber || '-'));
              row.append($('<td>').text(data.creditCard || '-'));
              row.append($('<td>').text(data._id));
              return row;
            }
      
            fetchUsers();
          });
        </script>



        

      








    <h2>Products Management:</h2>
    <table id="productTable" border="1">
      <thead>
          <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Price</th>
              <th>Description</th>
              <th>Image</th>
              <th>Condition</th>
              <th>Category</th>
              <th>Manufacture Date</th>
              <th>Supplier</th>
              <th>Quantity</th>
              <th>Age Range (From)</th>
              <th>Age Range (To)</th>
          </tr>
      </thead>
      <tbody>
          <!-- Products will be displayed here -->
      </tbody>
  </table>

  <script>
      // Function to fetch and display products
      function fetchProducts() {
          const url = "http://127.0.0.1:8080/api/products";

          // Make an AJAX request
          const xhr = new XMLHttpRequest();
          xhr.open("GET", url, true);
          xhr.onreadystatechange = function() {
              if (xhr.readyState === 4 && xhr.status === 200) {
                  const products = JSON.parse(xhr.responseText);
                  displayProducts(products);
              }
          };
          xhr.send();
      }

      // Function to display products in the table
      function displayProducts(products) {
          const tableBody = document.querySelector("#productTable tbody");

          products.forEach(product => {
              const row = tableBody.insertRow();
              row.insertCell(0).textContent = product._id;
              row.insertCell(1).textContent = product.title;
              row.insertCell(2).textContent = product.price;
              row.insertCell(3).textContent = product.description;
              row.insertCell(4).textContent = product.image;
              row.insertCell(5).textContent = product.condition;
              row.insertCell(6).textContent = product.category;
              row.insertCell(7).textContent = product.manufacture_date;
              row.insertCell(8).textContent = product.supplier;
              row.insertCell(9).textContent = product.quantity;
              row.insertCell(10).textContent = product.age_range.from;
              row.insertCell(11).textContent = product.age_range.to;
          });
      }

      // Call the fetchProducts function to start the process
      fetchProducts();
  </script>






        <!-- <h2>Supplier Management:</h2>

        <table id="data-table1">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Available Products</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <script>
          $(document).ready(function () {
            const url = 'http://127.0.0.1:8080/api/suppliers'; // Replace with the actual URL
            const tableBody = $('#data-table1 tbody');

            $.ajax({
              url: url,
              method: 'GET',
              dataType: 'json',
              success: function (data) {
                const companies = data; // Assuming the array is directly in the response

                companies.forEach(function (company) {
                  const row = createTableRowsupplier(company);
                  tableBody.append(row);
                });
              },
              error: function (error) {
                console.error('Error:', error);
              }
            });

            function createTableRowsupplier(data) {
              const row = $('<tr>');
              row.append($('<td>').text(data._id));
              row.append($('<td>').text(data.name));
              row.append($('<td>').text(data.availableProducts.join(', ') || '-'));
              return row;
            }
          });
        </script> -->


      </body>


    </main>




    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-content"></div>
      </div>
    </div>
  </body>
</html>
