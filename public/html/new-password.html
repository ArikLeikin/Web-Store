<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Playtopia|</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.png" />
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/passwordReset.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="../js/index.js"></script>
  </head>

  <body>
    <header class="header" role="banner">
      <div class="logout" id="logout">
        <a href="http://127.0.0.1:8080/logout" class="header-logout">log out</a>
      </div>
      <div class="container">
        <nav class="navUser">
          <ul class="navUser-section">
            <li class="item__account" id="item__account">
              <a aria-label="Account" href="http://127.0.0.1:8080/login"
                ><img
                  src="../images/white-icons/account-icon.png"
                  alt="account"
                  width="30"
                />
              </a>
            </li>
            <li class="item__wishlist">
              <a
                aria-label="Wishlist"
                href="http://127.0.0.1:8080/my-account?show=wishlist"
              >
                <img
                  src="../images/white-icons/wishlist-icon.png"
                  alt="Cart"
                  width="30"
                />
              </a>
            </li>
            <li class="item__cart">
              <a href="http://127.0.0.1:8080/cart" aria-label="Cart">
                <img
                  src="../images/white-icons/cart-icon.png"
                  alt="Cart"
                  width="30"
                />
              </a>
            </li>
          </ul>
        </nav>

        <div class="header-logo">
          <a href="http://127.0.0.1:8080/" data-instantload='{"page":"home"}'>
            <div class="header-logo-image-container">
              <img
                class="header-logo-image"
                src="../images/logo.png"
                width="180"
                height="auto"
              />
            </div>
          </a>
        </div>

        <div class="quickSearch">
          <form class="form" id="search-form">
            <div class="form-container">
              <input
                class="form-input"
                data-search-quick
                name="search_query"
                id="search_query"
                data-error-message="Search field cannot be empty."
                placeholder="Search the store"
                autocomplete="off"
              />
              <button
                type="submit"
                class="button search-button"
                id="searchButton"
              >
                <img
                  src="../images/white-icons/search-icon.png"
                  alt="Search"
                  width="25"
                  height="auto"
                />
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Start Navigation Bar -->
      <nav class="navbar">
        <ul class="menu">
          <li>
            <a
              class="hasDropdown header-title"
              href="http://127.0.0.1:8080/products"
              >Categories <i class="fa fa-angle-down"></i
            ></a>

            <ul class="nav_container">
              <div class="container__list">
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=boardgames"
                      class="sub-label-menu"
                      >Board Games</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=science"
                      class="sub-label-menu"
                      >Science</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=games"
                      class="sub-label-menu"
                      >Games</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=ridingtoys"
                      class="sub-label-menu"
                      >Riding Toys</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=puzzles"
                      class="sub-label-menu"
                      >Puzzles</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=musickaroke"
                      class="sub-label-menu"
                      >Music & Karaoke</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=books"
                      class="sub-label-menu"
                      >Books</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=lego"
                      class="sub-label-menu"
                      >Lego</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?category=dolls"
                      class="sub-label-menu"
                      >Dolls</a
                    >
                  </div>
                </div>
                <div class="container__listItem"></div>
                <div class="container__listItem"></div>
              </div>
            </ul>
          </li>
          <li>
            <a
              class="hasDropdown header-title"
              href="http://127.0.0.1:8080/products"
              >Ages<i class="fa fa-angle-down"></i
            ></a>
            <ul class="nav_container">
              <div class="container__list">
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=0-12"
                      class="sub-label-menu"
                      >0-12 MONTHS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=12-24"
                      class="sub-label-menu"
                      >12-24 MONTHS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=2-4"
                      class="sub-label-menu"
                      >2-4 YEARS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=5-7"
                      class="sub-label-menu"
                      >5-7 YEARS</a
                    >
                  </div>
                </div>
                <div class="container__listItem">
                  <div class="container__listItem_title">
                    <a
                      href="http://127.0.0.1:8080/products?age=8-99"
                      class="sub-label-menu"
                      >8-99 YEARS</a
                    >
                  </div>
                </div>
              </div>
            </ul>
          </li>
          <li>
            <a
              href="http://127.0.0.1:8080/products?category=outdoor"
              class="header-title"
              >Outdoor</a
            >
          </li>
          <li>
            <a
              href="http://127.0.0.1:8080/products?category=yad2"
              class="header-title"
              >Yad2</a
            >
          </li>
          <li>
            <a href="http://127.0.0.1:8080/Gift-Finder" class="header-title"
              >Gift Finder</a
            >
          </li>
        </ul>
      </nav>
      <!-- End Navigation Bar -->
    </header>
    <main style="margin-top: 170px">
      <h1 class="page-title">
        <i class="fas fa-unlock-alt"></i> Password Reset
      </h1>
      <div class="t-container">
        <form id="password-reset-form" class="form">
          <fieldset>
            <label for="token" class="reg-label" class="reg-label"
              >Reset Token</label
            >
            <input
              type="text"
              id="token"
              name="token"
              class="reg-input"
              required
            />
          </fieldset>
          <fieldset>
            <label for="password" class="reg-label">New Password</label>
            <input
              type="password"
              id="password"
              name="password"
              class="reg-input"
              required
            />
          </fieldset>
          <fieldset>
            <label for="password-confirm" class="reg-label"
              >Confirm Password</label
            >
            <input
              type="password"
              id="password-confirm"
              name="passwordConfirm"
              class="reg-input"
              required
            />
          </fieldset>
          <fieldset>
            <button type="button" id="reset-button" class="btn-ns-hot">
              Reset Password
            </button>
          </fieldset>
        </form>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-continer">
        <div class="links-section">
          <!-- Leading Categories Column -->
          <div class="footer-col">
            <h4 class="footer-col-title">Categories</h4>
            <ul class="footer-col-list">
              <li>
                <a href="http://127.0.0.1:8080/products?category=boardgames"
                  >Board Games</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=ridingtoys"
                  >Riding Toys</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=books"
                  >Books</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=science"
                  >Science</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=puzzles"
                  >Puzzles</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=lego">Lego</a>
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=games"
                  >Games</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=musickaroke"
                  >Music&Karaoke</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=dolls"
                  >Dolls</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-col">
            <h4 class="footer-col-title">Our Special Categories</h4>
            <ul class="footer-col-list">
              <li>
                <a href="http://127.0.0.1:8080/products?category=yad2"
                  >Yad2 Products</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?category=outdoor"
                  >Ourdoor Products</a
                >
              </li>
            </ul>
          </div>
          <!-- Ages Column -->
          <div class="footer-col">
            <h4 class="footer-col-title">Search By Ages</h4>
            <ul class="footer-col-list">
              <li>
                <a href="http://127.0.0.1:8080/products?age=0-12"
                  >for 0-12 months</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?age=12-24"
                  >for 12-24 months</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?age=2-4"
                  >for 2-4 years</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?age=5-7"
                  >for 5-7 years</a
                >
              </li>
              <li>
                <a href="http://127.0.0.1:8080/products?age=8-99"
                  >for 8-99 years</a
                >
              </li>
            </ul>
          </div>

          <!-- About Column -->
          <div class="footer-col">
            <h4 class="footer-col-title">Help</h4>
            <ul class="footer-col-list">
              <li><a href="http://127.0.0.1:8080/About">About Us</a></li>
              <li><a href="http://127.0.0.1:8080/Contact">Contact Us</a></li>
              <li><a href="http://127.0.0.1:8080/q&a">Help Center</a></li>
            </ul>
          </div>

          <div class="footer-col-bigger">
            <p class="footer-desc">
              Want to buy a gift and don't know where to start? Try our
              <a href="http://127.0.0.1:8080/Gift-Finder">Gift Finder page</a>
              and Find the Perfect Gifts for Kids!
            </p>
          </div>
        </div>

        <div class="footer-details">
          <!-- Social Media Links -->
          <div class="footer-facebook center">
            <a
              href="https://www.facebook.com/profile.php?id=61550532332028"
              target="_blank"
            >
              <i class="fab fa-facebook-f"></i> - check out our facebook page
            </a>
          </div>
          <div class="footer-all-rights center">
            <i class="fas fa-copyright"> PlayTopia Inc. since 2023</i>
          </div>
        </div>
      </div>
    </footer>
    <script>
      $(document).ready(function () {
        // Handle form submission
        $("#reset-button").click(function () {
          const token = $("#token").val();
          const password = $("#password").val();
          const passwordConfirm = $("#password-confirm").val();

          // Validate passwords match
          if (password !== passwordConfirm) {
            Swal.fire(
              "Passwords don't match.",
              "Please ensure the passwords match.",
              "error"
            );
            return;
          }

          // Create data object to send in the POST request
          const data = {
            token: token,
            password: password,
            passwordConfirm: passwordConfirm,
          };

          // Send POST request using AJAX
          $.ajax({
            type: "POST",
            url: "/new-password", // Replace with your server endpoint
            data: data,
            success: function (response) {
              // Display success message using SweetAlert2
              Swal.fire(
                "Password Reset Successful",
                "Your password has been reset.",
                "success"
              );
              window.location.href = "http://127.0.0.1:8080/login";
              // You can also redirect the user to the login page here
              //  = "/login";
            },
            error: function (error) {
              // Display error message using SweetAlert2
              Swal.fire(
                "Error",
                "An error occurred while resetting your password.",
                "error"
              );
            },
          });
        });
      });
    </script>
  </body>
</html>
